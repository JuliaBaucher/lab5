<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Julia – Knowledge Base Admin</title>
<style>
    body {
        font-family: system-ui, sans-serif;
        background: #111;
        color: #eee;
        margin: 0;
        padding: 40px;
    }
    .card {
        background: #1b1b1b;
        padding: 20px;
        border-radius: 8px;
        max-width: 700px;
        margin: auto;
        box-shadow: 0 0 12px rgba(0,0,0,0.6);
    }
    label { display:block; margin-top:15px; font-weight:600; }
    input, textarea {
        width: 100%;
        padding: 10px;
        margin-top:5px;
        border-radius:4px;
        border:1px solid #444;
        background:#222;
        color:#fff;
        font-size:15px;
    }
    button {
        margin-top: 20px;
        padding: 12px 20px;
        background:#3b82f6;
        border: none;
        border-radius:6px;
        color: #fff;
        cursor:pointer;
        font-size:16px;
    }
    button:hover { background:#2563eb; }
</style>
</head>
<body>

<div class="card">
    <h2>Knowledge Base Upload</h2>
    <p>Paste your text below to add it to Julia’s RAG knowledge base.</p>

    <label>File Name (example: <b>julia_background.md</b>)</label>
    <input id="filename" placeholder="filename.md"/>

    <label>Content (Markdown or plain text)</label>
    <textarea id="content" rows="15" placeholder="Paste text here..."></textarea>

    <button onclick="save()">Save to Knowledge Base</button>

    <p id="status"></p>
</div>

<script>
const API_URL = "https://b89mn09gd0.execute-api.eu-north-1.amazonaws.com/prod/upload";
const TOKEN = "Renovation-2024"; // <<-- Admin password

async function save() {
  const filename = document.getElementById("filename").value.trim();
  const content = document.getElementById("content").value.trim();
  const status = document.getElementById("status");

  if (!filename || !content) {
    status.textContent = "⚠️ Please provide both filename and content.";
    status.style.color = "orange";
    return;
  }

  try {
    status.textContent = "Uploading...";
    status.style.color = "#3b82f6";

    const res = await fetch(API_URL, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${TOKEN}`
      },
      body: JSON.stringify({ name: filename, content })
    });

    const data = await res.json();
    if (!res.ok) {
      status.textContent = "❌ Upload failed: " + (data.error || res.status);
      status.style.color = "red";
      return;
    }

    status.textContent = "✅ Upload successful!";
    status.style.color = "#22c55e";

  } catch (err) {
    console.error(err);
    status.textContent = "❌ Error: " + err.message;
    status.style.color = "red";
  }
}
</script>

</body>
</html>
